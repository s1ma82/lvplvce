import{r as m,u as E,j as d,f as n,h as y,a as g}from"./index-64592dc2.js";const k=(s=[],c=!1,e=null)=>{const[l,t]=m.useState(c);return m.useEffect(()=>{const o=r=>{if(s){let f=s.length;for(let h of s)r.target.closest(h)&&f--;if(f!==s.length)return}document.removeEventListener("mousedown",o),document.removeEventListener("keydown",u),typeof e=="function"?e():t(!1)},u=r=>{r.keyCode===27&&(document.removeEventListener("mousedown",o),document.removeEventListener("keydown",u),typeof e=="function"?e():t(!1))};return()=>{document.addEventListener("mousedown",o),document.addEventListener("keydown",u)}},[l,t]),[l,t]},L=()=>{const[s,c]=k(["#context-menu"]),[e,l]=m.useState(),t=E(),o=m.useRef();function u(i){const p=i.target.closest("[data-context]");if(!p)return;i.preventDefault();const a=o.current;if(!a)return;const{pageX:v,pageY:x}=i;v+150>document.documentElement.scrollWidth?a.style.left=`${document.documentElement.scrollWidth-200}px`:a.style.left=v+"px",x+200>document.documentElement.scrollHeight?a.style.top=`${document.documentElement.scrollHeight-250}px`:a.style.top=x+"px",l(p),c(!0)}m.useEffect(()=>{document.addEventListener("contextmenu",u)},[]);function r(){t(y(e.getAttribute("href"))),c(!1)}function f(){t(g({type:"editBookmark",data:e.getAttribute("href")})),c(!1)}function h(){const i=new URL(e.getAttribute("href")).hostname;return d.jsxs("span",{className:n.name,children:["[",i,"]"]})}return d.jsxs("div",{id:"context-menu",ref:o,className:`
				${n.contextMenu}
				${s?n.active:""}
			`,children:[e?h():null,d.jsxs("ul",{className:n.list,children:[d.jsx("li",{onClick:f,className:`${n.item} ${n.edit}`,children:"Edit"}),d.jsx("li",{onClick:r,className:n.item,children:"Delete"})]})]})};export{L as default};
